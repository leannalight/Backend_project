# Backend_project

Аутентификация и авторизация в проекте Mesto, sprint-14

## Актуальная версия v0.0.7

git tag -a v0.0.6 -m "my version v0.0.7"

## Технологии:

- Node.js,
- Express.js.
- MongoDB,
- Mongoose (Object Data Modeling (ODM) library for MongoDB and Node.js),

## Инструкции по установке, настройке и запуску

1. Для клонирования используйте git clone https://github.com/leannalight/Backend_project
2. Используйте npm i для переустановки пакетов.
3. Используйте npm run dev, чтобы открыть проект на локальном сервере.
4. Команда npm run start запускает сервер на локальном хосте: 3030;
5. Команда npm run dev запускает сервер на локальном хосте: 3030 с горячей перезагрузкой;
6. Приложение Node.js подключается к серверу Mongo по адресу mongodb: // localhost: 27017 / mestodb;

## Что сделано: 

- в схеме пользователя есть обязательные email и password;
- поле email уникально и валидируется;
- в контроллере createUser почта и хеш пароля записываются в базу;
- есть контроллер login, он проверяет, полученные в теле запроса почту и пароль;
- если почта и пароль верные, контроллер login создаёт JWT, в пейлоуд которого записано свойство _id - с идентификатором пользователя; срок жизни токена — 7 дней;
- если почта и пароль верные, контроллер login возвращает созданный токен в ответе;
- если почта и пароль не верные, контроллер login возвращает ошибку 401;
- в app.js есть обработчики POST-запросов на роуты /signin и /signup;
- есть файл middlewares/auth.js, в нём мидлвэр для проверки JWT;
- при правильном JWT авторизационный мидлвэр добавляет в объект запроса пейлоуд и пропускает запрос - дальше;
- при неправильном JWT авторизационный мидвэр возвращает ошибку 401;
- все роуты, кроме /signin и /signup, защищены авторизацией;
- удалён хардкод req.user из самостоятельного проекта предыдущего спринта;
- пользователь не может удалить карточку, которую он не создавал;
- API не возвращает хеш пароля;
